import{a as U,A as f,J as E,m as h,a4 as b,o as R,g as F,w as l,e,u as r,K as w,b as V,a7 as _,i as B,E as C,aa as S,D as I,ad as L,ae as M,G as T}from"./index-vpA-h1lW.js";import{a as $,b as q,c as z,d as A,e as D,v as G}from"./validator-RQhN6wQS.js";const J=V("div",{class:"form-title"},[V("span",null,"注册")],-1),O=U({__name:"index",setup(K){let d=f(!1),c=E(),P=h(),p=f(),g=f(),o=b({username:"",password:"",confirmPassword:"",email:"",mobilePhoneNumber:"",nickname:"",sliderPass:!1}),y=b({username:[{required:!0,validator:$,trigger:"blur"}],password:[{validator:q,trigger:"blur"}],confirmPassword:[{validator:(m,a,t)=>{a===""?t(new Error("Please input the password again")):a!==o.password?t(new Error("Two inputs don't match!")):t()},trigger:"blur"}],email:[{validator:z,trigger:"blur"}],mobilePhoneNumber:[{validator:A,trigger:["blur","change"]}],nickname:[{validator:D,trigger:"blur"}],sliderPass:[{validator:G,trigger:"blur"}]});const k=async m=>{m&&await m.validate(a=>{a?(d.value=!0,P.userSignup(o).then(()=>{c.push("/account/login"),_({title:"注册成功",type:"success",message:"请登录"}),d.value=!1},t=>{_({title:"注册失败",type:"error",message:t}),d.value=!1,o.sliderPass=!1,p.value.reset()})):(_({title:"表单校验失败",type:"error"}),d.value=!1,o.sliderPass=!1,p.value.reset())})};return(m,a)=>{const t=B,u=C,i=S,n=I,x=L,v=M,N=T;return R(),F(N,{ref_key:"signupFormRef",ref:g,size:"large",model:r(o),rules:r(y)},{default:l(()=>[J,e(n,{prop:"username"},{default:l(()=>[e(i,{type:"text",modelValue:r(o).username,"onUpdate:modelValue":a[0]||(a[0]=s=>r(o).username=s),placeholder:"账号（必填）",clearable:""},{prefix:l(()=>[e(u,null,{default:l(()=>[e(t,{name:"User"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{prop:"password"},{default:l(()=>[e(i,{type:"password",modelValue:r(o).password,"onUpdate:modelValue":a[1]||(a[1]=s=>r(o).password=s),placeholder:"密码（必填）","show-password":"",clearable:""},{prefix:l(()=>[e(u,null,{default:l(()=>[e(t,{name:"Lock"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{prop:"confirmPassword"},{default:l(()=>[e(i,{type:"password",modelValue:r(o).confirmPassword,"onUpdate:modelValue":a[2]||(a[2]=s=>r(o).confirmPassword=s),placeholder:"确认密码（必填）","show-password":"",clearable:""},{prefix:l(()=>[e(u,null,{default:l(()=>[e(t,{name:"Lock"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{prop:"email"},{default:l(()=>[e(i,{type:"email",modelValue:r(o).email,"onUpdate:modelValue":a[3]||(a[3]=s=>r(o).email=s),placeholder:"电子邮箱",clearable:""},{prefix:l(()=>[e(u,null,{default:l(()=>[e(t,{name:"Message"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{prop:"mobilePhoneNumber"},{default:l(()=>[e(i,{type:"tel",modelValue:r(o).mobilePhoneNumber,"onUpdate:modelValue":a[4]||(a[4]=s=>r(o).mobilePhoneNumber=s),placeholder:"手机号码",clearable:""},{prefix:l(()=>[e(u,null,{default:l(()=>[e(t,{name:"phone"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{prop:"nickname"},{default:l(()=>[e(i,{type:"text",modelValue:r(o).nickname,"onUpdate:modelValue":a[5]||(a[5]=s=>r(o).nickname=s),placeholder:"昵称（真实姓名）",clearable:""},{prefix:l(()=>[e(u,null,{default:l(()=>[e(t,{name:"nickName"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{prop:"sliderPass"},{default:l(()=>[e(x,{ref_key:"slideRef",ref:p,value:r(o).sliderPass,"onUpdate:value":a[6]||(a[6]=s=>r(o).sliderPass=s)},null,8,["value"])]),_:1}),e(n,null,{default:l(()=>[e(v,{class:"form-button",type:"primary",loading:r(d),onClick:a[7]||(a[7]=s=>k(r(g)))},{default:l(()=>[w(" 注 册 ")]),_:1},8,["loading"])]),_:1}),e(n,null,{default:l(()=>[e(v,{class:"form-button",onClick:a[8]||(a[8]=s=>r(c).push("/account/login"))},{default:l(()=>[w(" 登 录 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{O as default};
