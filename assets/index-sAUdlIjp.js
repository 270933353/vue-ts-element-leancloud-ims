import{a4 as S,a as T,A as d,m as B,ai as C,aQ as E,M as _,aR as k,o as f,c as A,e as c,w as t,b as R,K as r,u as l,t as s,y as H,g as N,L as U,ae as I,aN as L,ak as V,aO as q,ap as h,aS as J,aT as Q}from"./index-vpA-h1lW.js";/* empty css                   */const j=S([{prop:"id",label:"ID",width:41,showTip:!0},{prop:"title",label:"日程标题",showTip:!0},{prop:"textarea",label:"日程描述",showTip:!0},{prop:"allDay",label:"时间类型",width:82,align:"center"},{prop:"start",label:"开始时间",width:145},{prop:"end",label:"结束时间",width:145},{prop:"isRrule",label:"是否重复",width:82,align:"center"},{prop:"rrule",label:"重复频率"},{label:"操作",prop:"operation",width:158,align:"center",fixed:"right"}]),K={class:"header1"},F=T({__name:"index",setup(O){let b=d(!1);const m=B();C(()=>{m.getUserInfo(),v()});let o=d([]),g=d([]);const v=async()=>{await E().then(a=>{o.value=a,console.log(o.value)},a=>{_({type:"error",message:"获取日程数据失败 "+a})}),g.value=k(o.value,m.job)},y=async a=>{await Q(o.value).then(()=>{_({type:"success",message:a+"成功 "})},u=>{_({type:"error",message:a+"失败 "+u})})};let n=d([]);const D=a=>{n.value=a},w=()=>{U({title:"提示",message:"确认删除选中的数据?",dangerouslyUseHTMLString:!0,showCancelButton:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then(()=>{o.value=o.value.filter(a=>!n.value.some(u=>a.id===u.id)),y("批量删除")}).catch(a=>{_({type:"error",message:"批量删除失败 "+a})})};return(a,u)=>{const p=I,Y=L,x=V,M=q;return f(),A("div",null,[c(x,null,{default:t(()=>[R("div",K,[c(p,{style:{width:"99px"},type:"primary"},{default:t(()=>[r("添加日程")]),_:1}),c(p,{type:"primary",disabled:!l(n).length,onClick:w},{default:t(()=>[r(s("批量删除 "+(l(n).length>0?l(n).length+" 行":"")),1)]),_:1},8,["disabled"])]),H((f(),N(Y,{ref:"tableRef",showSelection:!0,showIndex:!0,tableColumns:l(j),tableData:l(g),onSelectionChange:D,border:"","highlight-current-row":"",style:{margin:"10px 0px"}},{id:t(({cell:e})=>[r(s(e),1)]),title:t(({cell:e})=>[r(s(e),1)]),textarea:t(({cell:e})=>[r(s(e),1)]),allDay:t(({cell:e})=>[r(s(e?"全天":"小时"),1)]),start:t(({row:e,cell:i})=>[r(s(e.allDay?l(h)(i).format("YYYY-MM-DD"):l(h)(i).format("YYYY-MM-DD HH:mm")),1)]),end:t(({row:e,cell:i})=>[r(s(e.allDay?l(h)(i).format("YYYY-MM-DD"):l(h)(i).format("YYYY-MM-DD HH:mm")),1)]),isRrule:t(({cell:e})=>[r(s(e?"是":"否"),1)]),rrule:t(({row:e})=>[r(s(e.isRrule?l(J)(e.rrule):""),1)]),operation:t(({})=>[c(p,{type:"success"},{default:t(()=>[r("编辑")]),_:1}),c(p,{type:"danger"},{default:t(()=>[r("删除")]),_:1})]),_:1},8,["tableColumns","tableData"])),[[M,l(b)]])]),_:1})])}}});export{F as default};
